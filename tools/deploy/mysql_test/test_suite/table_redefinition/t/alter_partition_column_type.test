--disable_query_log
set @@session.explicit_defaults_for_timestamp=off;
--enable_query_log
# owner      : kunxing.lyk
# owner group: storage
# description: alter type of a partition column is not allowed in mysql
#--disable_abort_on_error

--disable_warnings
drop table if exists t1;
drop table if exists t2;
drop table if exists t3;
--enable_warnings

# case 1
CREATE TABLE `t1`(a bigint, b date) partition by range columns(b) 
(
    partition part_1 values less than ('2016-09-01'),
    partition part_2 values less than ('2020-09-01')
);

--error 1654
ALTER TABLE `t1` MODIFY b INT;

# case 2
create table t2(c1 int, c2 int) partition by hash(c1) partitions 3;
insert into t2 values(100, 100);
alter table t2 modify c1 tinyint;


# case 3
CREATE TABLE `t3`(a bigint, b char(10)) partition by list columns(b)
(
partition part_1 values in ('0'),
partition part_2 values in ('1'),
partition part_3 values in ('2')
);

ALTER TABLE `t3` MODIFY b varchar(18);
--error 1654
ALTER TABLE `t3` MODIFY b int;

drop table t1;
drop table t2;
drop table t3;
