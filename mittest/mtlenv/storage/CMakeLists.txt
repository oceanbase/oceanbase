storage_unittest(test_tenant_module_env)
storage_unittest(test_ls_service test_ls_service.cpp)
storage_dml_unittest(test_write_tablet_slog test_write_tablet_slog.cpp)
storage_dml_unittest(test_table_scan_pure_data_table)
storage_dml_unittest(test_tenant_meta_mem_mgr test_tenant_meta_mem_mgr.cpp)
#storage_dml_unittest(test_tablet_status test_tablet_status.cpp) TODO yq: transfer fix later
storage_dml_unittest(test_tablet_status_cache test_tablet_status_cache.cpp)
storage_dml_unittest(test_tablet_member_load_and_free test_tablet_member_load_and_free.cpp)
storage_dml_unittest(test_ls_migration_param test_ls_migration_param.cpp)
storage_dml_unittest(test_ls_tablet_service test_ls_tablet_service.cpp)
if(OB_BUILD_CLOSE_MODULES)
  storage_unittest(test_memtable test_memtable_v2.cpp)
endif()
#storage_dml_unittest(test_lob_manager test_lob_manager.cpp)
storage_unittest(test_trans test_trans.cpp)
#storage_unittest(test_ls_restore_task_mgr)
storage_dml_unittest(test_index_sstable_estimator)
storage_dml_unittest(test_index_sstable_multi_estimator)
storage_dml_unittest(test_multi_version_sstable_single_get)
#storage_dml_unittest(test_multi_version_sstable_merge) TODO(dengzhi.ldz): fix it
storage_dml_unittest(test_medium_info_reader test_medium_info_reader.cpp)
storage_dml_unittest(test_tablet_mds_data test_tablet_mds_data.cpp)
storage_dml_unittest(test_mds_data_read_write test_mds_data_read_write.cpp)
storage_unittest(test_physical_copy_task test_physical_copy_task.cpp)
storage_unittest(test_shared_block_reader_writer)
storage_dml_unittest(test_macro_ref_cnt test_macro_ref_cnt.cpp)
# storage_dml_unittest(test_multi_version_merge_recycle)
# storage_unittest(test_speed_limit test_speed_limit.cpp)
storage_dml_unittest(test_ls_tablet_info_writer_and_reader test_ls_tablet_info_writer_and_reader.cpp)

add_subdirectory(checkpoint)
add_subdirectory(blocksstable)

target_link_libraries(test_memtable PUBLIC mock_tx_ctx mock_tx_log_adapter)
